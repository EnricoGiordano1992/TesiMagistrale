SRCS="./ReChannel/components/rc_report_ids.cpp ./ReChannel/components/rc_var.cpp ./ReChannel/components/rc_semaphore.cpp ./ReChannel/components/rc_signal.cpp ./ReChannel/components/rc_join.cpp ./ReChannel/components/rc_signal_resolved.cpp ./ReChannel/components/rc_mutex.cpp ./ReChannel/util/rc_driver_object.cpp ./ReChannel/util/rc_throwable.cpp ./ReChannel/util/rc_port_handle.cpp ./ReChannel/util/rc_object_handle.cpp ./ReChannel/util/rc_report.cpp ./ReChannel/util/rc_mutex_object.cpp ./ReChannel/util/rc_export_handle.cpp ./ReChannel/util/rc_delta_sync_object.cpp ./ReChannel/core/rc_report_ids.cpp ./ReChannel/core/rc_reconfigurable_set.cpp ./ReChannel/core/rc_non_reconfigurable.cpp ./ReChannel/core/rc_reset_channel_if.cpp ./ReChannel/core/rc_common_header.cpp ./ReChannel/core/rc_process_support.cpp ./ReChannel/core/rc_portmap.cpp ./ReChannel/core/rc_switch_connector.cpp ./ReChannel/core/rc_control.cpp ./ReChannel/core/rc_process.cpp ./ReChannel/core/rc_transaction_counter.cpp ./ReChannel/core/rc_reconfigurable.cpp ./ReChannel/communication/rc_abstract_interface_wrapper.cpp ./ReChannel/communication/accessors/rc_signal_accessors.cpp ./ReChannel/communication/accessors/rc_abstract_accessor.cpp ./ReChannel/communication/portals/rc_abstract_portal.cpp ./ReChannel/communication/rc_report_ids.cpp ./ReChannel/communication/exportals/rc_wrapper_pool.cpp ./ReChannel/communication/exportals/rc_abstract_exportal.cpp ./ReChannel/communication/rc_abstract_switch.cpp"
OBJS="./obj/ReChannel/components/rc_report_ids.o  ./obj/ReChannel/components/rc_var.o  ./obj/ReChannel/components/rc_semaphore.o  ./obj/ReChannel/components/rc_signal.o  ./obj/ReChannel/components/rc_join.o  ./obj/ReChannel/components/rc_signal_resolved.o  ./obj/ReChannel/components/rc_mutex.o  ./obj/ReChannel/util/rc_driver_object.o  ./obj/ReChannel/util/rc_throwable.o  ./obj/ReChannel/util/rc_port_handle.o  ./obj/ReChannel/util/rc_object_handle.o  ./obj/ReChannel/util/rc_report.o  ./obj/ReChannel/util/rc_mutex_object.o  ./obj/ReChannel/util/rc_export_handle.o  ./obj/ReChannel/util/rc_delta_sync_object.o  ./obj/ReChannel/core/rc_report_ids.o  ./obj/ReChannel/core/rc_reconfigurable_set.o  ./obj/ReChannel/core/rc_non_reconfigurable.o  ./obj/ReChannel/core/rc_reset_channel_if.o  ./obj/ReChannel/core/rc_common_header.o  ./obj/ReChannel/core/rc_process_support.o  ./obj/ReChannel/core/rc_portmap.o  ./obj/ReChannel/core/rc_switch_connector.o  ./obj/ReChannel/core/rc_control.o  ./obj/ReChannel/core/rc_process.o  ./obj/ReChannel/core/rc_transaction_counter.o  ./obj/ReChannel/core/rc_reconfigurable.o  ./obj/ReChannel/communication/rc_abstract_interface_wrapper.o  ./obj/ReChannel/communication/accessors/rc_signal_accessors.o  ./obj/ReChannel/communication/accessors/rc_abstract_accessor.o  ./obj/ReChannel/communication/portals/rc_abstract_portal.o  ./obj/ReChannel/communication/rc_report_ids.o  ./obj/ReChannel/communication/exportals/rc_wrapper_pool.o  ./obj/ReChannel/communication/exportals/rc_abstract_exportal.o  ./obj/ReChannel/communication/rc_abstract_switch.o"
IFS=' ' read -r -a OBJS_ARR <<< "$OBJS"
IFS2=' ' read -r -a SRCS_ARR <<< "$SRCS"
LEN=$((${#OBJS_ARR[@]}))
echo "numero file: "$LEN

rm Makefile
echo "CXX = g++" >> Makefile 
echo "CFLAGS = -O3 -Wall -DRC_DEBUG_LEVEL=5 -g -std=c++11 -fpermissive -DRC_DEBUG -DSC_INCLUDE_DYNAMIC_PROCESSES -DBOOST_MULTI_INDEX_DISABLE_SERIALIZATION -w" >> Makefile
echo "SYSTEMC=\$\$SYSTEMC_HOME" >> Makefile

echo "OBJS = ./obj/ReChannel/components/rc_report_ids.o  ./obj/ReChannel/components/rc_var.o  ./obj/ReChannel/components/rc_semaphore.o  ./obj/ReChannel/components/rc_signal.o  ./obj/ReChannel/components/rc_join.o  ./obj/ReChannel/components/rc_signal_resolved.o  ./obj/ReChannel/components/rc_mutex.o  ./obj/ReChannel/util/rc_driver_object.o  ./obj/ReChannel/util/rc_throwable.o  ./obj/ReChannel/util/rc_port_handle.o  ./obj/ReChannel/util/rc_object_handle.o  ./obj/ReChannel/util/rc_report.o  ./obj/ReChannel/util/rc_mutex_object.o  ./obj/ReChannel/util/rc_export_handle.o  ./obj/ReChannel/util/rc_delta_sync_object.o  ./obj/ReChannel/core/rc_report_ids.o  ./obj/ReChannel/core/rc_reconfigurable_set.o  ./obj/ReChannel/core/rc_non_reconfigurable.o  ./obj/ReChannel/core/rc_reset_channel_if.o  ./obj/ReChannel/core/rc_common_header.o  ./obj/ReChannel/core/rc_process_support.o  ./obj/ReChannel/core/rc_portmap.o  ./obj/ReChannel/core/rc_switch_connector.o  ./obj/ReChannel/core/rc_control.o  ./obj/ReChannel/core/rc_process.o  ./obj/ReChannel/core/rc_transaction_counter.o  ./obj/ReChannel/core/rc_reconfigurable.o  ./obj/ReChannel/communication/rc_abstract_interface_wrapper.o  ./obj/ReChannel/communication/accessors/rc_signal_accessors.o  ./obj/ReChannel/communication/accessors/rc_abstract_accessor.o  ./obj/ReChannel/communication/portals/rc_abstract_portal.o  ./obj/ReChannel/communication/rc_report_ids.o  ./obj/ReChannel/communication/exportals/rc_wrapper_pool.o  ./obj/ReChannel/communication/exportals/rc_abstract_exportal.o  ./obj/ReChannel/communication/rc_abstract_switch.o" >> Makefile 
echo "SRCS = ./ReChannel/components/rc_report_ids.cpp ./ReChannel/components/rc_var.cpp ./ReChannel/components/rc_semaphore.cpp ./ReChannel/components/rc_signal.cpp ./ReChannel/components/rc_join.cpp ./ReChannel/components/rc_signal_resolved.cpp ./ReChannel/components/rc_mutex.cpp ./ReChannel/util/rc_driver_object.cpp ./ReChannel/util/rc_throwable.cpp ./ReChannel/util/rc_port_handle.cpp ./ReChannel/util/rc_object_handle.cpp ./ReChannel/util/rc_report.cpp ./ReChannel/util/rc_mutex_object.cpp ./ReChannel/util/rc_export_handle.cpp ./ReChannel/util/rc_delta_sync_object.cpp ./ReChannel/core/rc_report_ids.cpp ./ReChannel/core/rc_reconfigurable_set.cpp ./ReChannel/core/rc_non_reconfigurable.cpp ./ReChannel/core/rc_reset_channel_if.cpp ./ReChannel/core/rc_common_header.cpp ./ReChannel/core/rc_process_support.cpp ./ReChannel/core/rc_portmap.cpp ./ReChannel/core/rc_switch_connector.cpp ./ReChannel/core/rc_control.cpp ./ReChannel/core/rc_process.cpp ./ReChannel/core/rc_transaction_counter.cpp ./ReChannel/core/rc_reconfigurable.cpp ./ReChannel/communication/rc_abstract_interface_wrapper.cpp ./ReChannel/communication/accessors/rc_signal_accessors.cpp ./ReChannel/communication/accessors/rc_abstract_accessor.cpp ./ReChannel/communication/portals/rc_abstract_portal.cpp ./ReChannel/communication/rc_report_ids.cpp ./ReChannel/communication/exportals/rc_wrapper_pool.cpp ./ReChannel/communication/exportals/rc_abstract_exportal.cpp ./ReChannel/communication/rc_abstract_switch.cpp" >> Makefile 
echo "INCDIR = -I./include/ -I. -I\$(SYSTEMC)/include/ -I./ -I./Rechannel/" >> Makefile 

echo "all: rechannel.a" >> Makefile 
echo "rechannel.a: \$(OBJS)" >> Makefile
echo "	ar rc \$@ \$(OBJS)" >> Makefile

for ((x=0; x<$LEN; x++))
{
  echo ${OBJS_ARR[$x]} ": " ${SRCS_ARR[$x]} >> Makefile
  echo "	@echo Building \$@" >> Makefile
  echo "	\$(CXX) \$(CFLAGS) \$(INCDIR) -o \$@ -c \$< " >> Makefile 
  echo "" >> Makefile
}

echo "clean:" >> Makefile
echo "	rm -f rechannel.a \$(OBJS)" >> Makefile
echo ".PHONY: all clean" >> Makefile


